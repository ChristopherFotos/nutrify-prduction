(this["webpackJsonpnutrify-dashboard"]=this["webpackJsonpnutrify-dashboard"]||[]).push([[0],[,,,,,function(e,t,a){},,function(e,t,a){e.exports=a(15)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),i=(a(5),a(12),a(13),a(1)),s=a.n(i),l=a(3),d=a(2),u=function(e){console.log("PROPS.RECIPE:  ",e.recipe);var t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],o=a[1];function i(){return(i=Object(l.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/user/getrecipe",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:e.recipe})});case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,o(n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){i.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){e.addEvents()})),console.log("RECIPE CARD RECIPE VALUE: ",c),c.length<1?null:r.a.createElement("div",{className:"grid-card"},r.a.createElement("img",{src:c.recipe[0].img,className:"card-img",alt:"the finished product"}),r.a.createElement("span",{className:"recipe-title"},c.recipe[0].label),r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"show-details show-details-open ingredient-card-tag"},"Show"),r.a.createElement("div",{className:"card-content-closed"},r.a.createElement("ul",{style:{display:"none"}},c.recipe[0].ingredientLines.map((function(e){return r.a.createElement("li",null,e)}))),r.a.createElement("h4",{style:{display:"none"}},"A lovely heading"),r.a.createElement("p",{style:{display:"none"}},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."))),r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"show-details show-details-open nutrition-card-tag"},"Show"),r.a.createElement("div",{className:"card-content-closed"},r.a.createElement("ul",{style:{display:"none"}},c.recipe[0].ingredientLines.map((function(e){return r.a.createElement("li",null,e)}))),r.a.createElement("h4",{style:{display:"none"}},"A lovely heading"),r.a.createElement("p",{style:{display:"none"}},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.")),r.a.createElement("div",{className:"recipe-summary-div"},"6 ingredients | Low carb | Low fat | Martha Stewart")))},m=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2);a[0],a[1];function c(){var e=document.querySelectorAll(".show-details");console.log("TARGETS EL: ",e),e.forEach((function(e){console.log("adding event listeners"),e.hasEventListener||(e.hasEventListener=!0,e.addEventListener("click",(function(e){console.log("OPEN EVENT FIRING"),e.target.expanded?e.target.expanded&&(console.log("CLOSE EVENT FIRING"),e.target.expanded=!1,e.target.innerText="Show",Array.from(e.target.parentElement.children[1].children).forEach((function(e){e.style.display="none"})),e.target.parentElement.children[1].classList.remove("card-content-open"),e.target.parentElement.children[1].classList.add("card-content-closed"),e.target.parentElement.children[1].classList.remove("card-open"),e.target.parentElement.classList.remove("card-open"),e.target.parentElement.classList.add("card-closed")):(e.target.expanded=!0,e.target.innerText="Hide",Array.from(e.target.parentElement.children[1].children).forEach((function(e){e.style.display="block"})),e.target.parentElement.children[1].classList.remove("card-content-closed"),e.target.parentElement.children[1].classList.add("card-content-open"),e.target.parentElement.classList.remove("card-closed"),e.target.parentElement.classList.add("card-open"))})))}))}return Object(n.useEffect)((function(){console.log("PROPS IN CARDCONTAINER",e)})),e.recipes.length>0?r.a.createElement("div",{className:"card-container"},r.a.createElement("h3",{className:"dashboard-heading"},"Saved recipes"),e.recipes.map((function(e){return r.a.createElement(u,{recipe:e,addEvents:c})}))):r.a.createElement("div",{className:"card-container"},r.a.createElement("h4",{className:"dashboard-heading"},"Hungry? Save recipes and find them here later! "),r.a.createElement("p",{id:"how-to-p"},"Go to the home page and search for a recipe by name or ingredients. Click 'Save' when you find one you like, then you can come back here and find it later. "))},p=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),i=Object(d.a)(o,2);i[0],i[1];console.log("initial value: ","INITIAL VALUE"),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(s.a.mark((function e(){var t,n,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/verify",{method:"POST",mode:"cors",headers:{Authorization:"Bearer "+localStorage.token},credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,console.log("JSONresponse :",n),"Authentication failed"!==n.message){e.next=13;break}console.log(n),console.log("Auth failed"),window.location.replace("/"),e.next=21;break;case 13:return e.next=15,fetch("/user/recipes",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include"});case 15:return r=e.sent,e.next=18,r.json();case 18:o=e.sent,c(o.recipes),console.log("recipes state: ",a);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var u=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/logout",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include"});case 2:t=e.sent,console.log(t),200===t.status&&window.location.replace("/");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app-container"},r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"navbar-button-container",id:"guest-navbar"},r.a.createElement("a",{href:"/",className:"navbar-button",id:"dashboard-button"},"home"),r.a.createElement("span",{className:"navbar-button",id:"login-button",onClick:u},"logout"))),r.a.createElement(m,{recipes:a})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[7,1,2]]]);
//# sourceMappingURL=main.1c6e46b4.chunk.js.map