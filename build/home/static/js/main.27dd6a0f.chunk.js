(this["webpackJsonpnutrify-full"]=this["webpackJsonpnutrify-full"]||[]).push([[0],{12:function(e,a,t){e.exports=t(19)},17:function(e,a,t){},19:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(6),o=t.n(c),s=(t(17),t(4),t(2)),i=t.n(s),l=t(3),d=t(1),u=t(7),p=t.n(u),m=function(e){return e.query?r.a.createElement("p",{className:"search-summary-p"},"Showing results for ",r.a.createElement("b",null,e.query)):null},h=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-options-label",onClick:e.onClick},"More search options"))},g=t(8),b=t(9),f=t(10),E=t(11),v=function(e){Object(E.a)(t,e);var a=Object(f.a)(t);function t(e){var n;return Object(g.a)(this,t),(n=a.call(this,e)).state={calFrom:null,calTo:null},n.calTo="null",n.options={red:!1,blue:!1},n}return Object(b.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"search-options-expand",className:"search-dropdown-closed"},r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"low carb"}),r.a.createElement("span",null,"Low carb")),r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"low fat"}),r.a.createElement("span",null,"Low fat")),r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"balanced"}),r.a.createElement("span",null,"Balanced")),r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"high protein"}),r.a.createElement("span",null,"High protein")),r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"high fiber"}),r.a.createElement("span",null,"High fiber")),r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"low sodium"}),r.a.createElement("span",null,"Low sodium")),r.a.createElement("p",null,r.a.createElement("span",{className:"search-option-heading-closed"},"nutrient options:"),r.a.createElement("input",{className:"validate",placeholder:"min calories",name:"cal-from",type:"number",onChange:function(a){e.props.updateOptions(a)},value:this.calFrom,id:"option-input-1"}),r.a.createElement("input",{placeholder:"max calories",name:"cal-to",type:"number",value:this.calTo,onChange:function(a){isNaN(a.target.value)||e.props.updateOptions(a)},className:"validate",id:"option-input-2"})))}}]),t}(r.a.Component),w=function(e){var a=Object(n.useState)(""),t=Object(d.a)(a,2),c=t[0],o=t[1],s=Object(n.useState)({balanced:!1,lowCarb:!1,lowFat:!1,lowSodium:!1,highFiber:!1,highProtein:!1}),i=Object(d.a)(s,2),l=i[0],u=(i[1],Object(n.useState)()),g=Object(d.a)(u,2),b=g[0],f=g[1],E=Object(n.useState)(!1),w=Object(d.a)(E,2),y=w[0],O=w[1];return r.a.createElement("form",{className:"search-form"},r.a.createElement("div",{className:"search-flexbox-span flex-align-bottom"},r.a.createElement("img",{src:p.a,className:"logo",alt:"nutrify logo"}),r.a.createElement("span",{className:"subline"},"powered by edamam")),r.a.createElement("input",{type:"text",id:"search-bar",value:c,onChange:function(e){o(e.target.value)},onKeyPress:function(a){return function(a){"Enter"===a.key&&(e.onClick(c,l),f(c,l))}(a)},className:"search-bar",placeholder:"search by ingredient or recipe name"}),r.a.createElement("div",{className:"search-flexbox-span"},r.a.createElement("a",{className:"waves-effect waves-light btn search-button",onClick:function(a){a.preventDefault(),e.onClick(c,l),f(c,l)}},"search"),r.a.createElement(h,{onClick:y?function(){O(!y);var e=document.getElementById("search-options-expand");e.classList.remove("search-dropdown-open"),e.classList.add("search-dropdown-closed"),Array.from(e.children).forEach((function(e){e.classList.remove("search-option-heading-open"),e.classList.add("search-option-heading-closed")}))}:function(){O(!y);var e=document.getElementById("search-options-expand");e.classList.remove("search-dropdown-closed"),e.classList.add("search-dropdown-open"),Array.from(e.children).forEach((function(e){e.classList.remove("search-option-heading-closed"),e.classList.add("search-option-heading-open")}))}})),r.a.createElement(v,{updateOptions:function(e){"low carb"===e.target.name?l.lowCarb=!l.lowCarb:l.lowCarb=l.lowCarb,"low fat"===e.target.name?l.lowFat=!l.lowFat:l.lowFat=l.lowFat,"balanced"===e.target.name?l.balanced=!l.balanced:l.balanced=l.balanced,"high protein"===e.target.name?l.highProtein=!l.highProtein:l.highProtein=l.highProtein,"high fiber"===e.target.name?l.highFiber=!l.highFiber:l.highFiber=l.highFiber,"low sodium"===e.target.name?l.lowSodium=!l.lowSodium:l.lowSodium=l.lowSodium,"cal-from"!==e.target.name||isNaN(e.target.value)||(l.calFrom=e.target.value),"cal-to"!==e.target.name||isNaN(e.target.value)||(l.calTo=e.target.value)}}),r.a.createElement(m,{query:b}))},y=function(e){var a=Object(n.useState)(""),t=Object(d.a)(a,2),c=t[0],o=t[1],s=Object(n.useState)(""),u=Object(d.a)(s,2),p=u[0],m=u[1],h=Object(n.useState)(""),g=Object(d.a)(h,2),b=g[0],f=g[1],E=Object(n.useState)(!1),v=Object(d.a)(E,2),w=v[0],y=v[1],O=Object(n.useState)(!1),N=Object(d.a)(O,2),j=N[0],k=N[1],x=Object(n.useState)(!1),C=Object(d.a)(x,2),S=C[0],L=C[1],F=Object(n.useState)(!1),T=Object(d.a)(F,2),P=(T[0],T[1]),I=Object(n.useState)(!1),W=Object(d.a)(I,2),q=W[0],_=W[1],A=function(){return"login"===e.render?"login":"signup"};function B(){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(i.a.mark((function a(){var t,n,r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=JSON.stringify({email:c,password:p,verifyPassword:b}),"signup"!==A()||p===b){a.next=4;break}return _(!0),a.abrupt("return");case 4:if(""!==c){a.next=7;break}return L(!0),a.abrupt("return");case 7:if(""!==p){a.next=10;break}return k(!0),a.abrupt("return");case 10:return"signup"===A()&&""===b&&P(!0),a.next=13,fetch("/user/".concat(A()),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include",body:t});case 13:if(401!==(n=a.sent).status){a.next=18;break}return y(!0),e.isLoggedIn(!1),a.abrupt("return");case 18:if(201!==n.status&&200!==n.status){a.next=28;break}if(e.isLoggedIn(!0),y(!1),"signup"!==A()||w){a.next=26;break}return a.next=24,fetch("/user/login",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include",body:t});case 24:409===(r=a.sent).status?y(!0):200===r.status&&(y(!1),window.location.reload(),e.isLoggedIn(!0));case 26:a.next=29;break;case 28:409===n.status&&y(!0);case 29:case"end":return a.stop()}}),a)})))).apply(this,arguments)}var K=function(e){"Enter"===e.key&&B()};return r.a.createElement("div",{className:"login-dropdown",id:"login-dropdown","data-dropdown":"true"},r.a.createElement("h4",{"data-dropdown":"true"},"login"===e.render&&"login","signup"===e.render&&"signup"),r.a.createElement("form",{"data-dropdown":"true"},r.a.createElement("label",{for:"email","data-dropdown":"true"},"Email"),r.a.createElement("input",{type:"text",name:"email","data-dropdown":"true",className:"login-input",onChange:function(e){o(e.target.value)},onKeyPress:function(e){K(e)}}),r.a.createElement("label",{for:"password","data-dropdown":"true"},"Password"),r.a.createElement("input",{type:"password",name:"password","data-dropdown":"true",className:"login-input",onChange:function(e){m(e.target.value)},onKeyPress:function(e){K(e)}}),"signup"===e.render&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{for:"verify-password","data-dropdown":"true"},"Verify password"),r.a.createElement("input",{type:"password",name:"verify-password","data-dropdown":"true",className:"login-input",onChange:function(e){f(e.target.value)},onKeyPress:function(e){K(e)}})),r.a.createElement("span",{className:"login-button",onClick:B,"data-dropdown":"true"},"login"===e.render&&"login","signup"===e.render&&"sign up")),w&&"signup"===e.render&&r.a.createElement("p",null,"Whoops! That email is already being used."),w&&"login"===e.render&&r.a.createElement("p",null,"Whoops! Invalid email or password."),q&&r.a.createElement("p",null,"Whoops! Those passwords don't match."),S&&r.a.createElement("p",null,"Whoops! Please provide an email address"),j&&r.a.createElement("p",null,"Whoops! Please provide a password"))},O=function(e){var a=Object(n.useState)(!1),t=Object(d.a)(a,2),c=t[0],o=t[1],s=function(e){e.target.expanded?e.target.expanded&&(e.target.expanded=!1,e.target.innerText="Show",Array.from(e.target.parentElement.children[1].children).forEach((function(e){e.style.display="none"})),e.target.parentElement.children[1].classList.remove("card-content-open"),e.target.parentElement.children[1].classList.add("card-content-closed"),e.target.parentElement.children[1].classList.remove("card-open"),e.target.parentElement.classList.remove("card-open"),e.target.parentElement.classList.add("card-closed")):(e.target.expanded=!0,e.target.innerText="Hide",Array.from(e.target.parentElement.children[1].children).forEach((function(e){e.style.display="block"})),e.target.parentElement.children[1].classList.remove("card-content-closed"),e.target.parentElement.children[1].classList.add("card-content-open"),e.target.parentElement.classList.remove("card-closed"),e.target.parentElement.classList.add("card-open"))};function u(){return(u=Object(l.a)(i.a.mark((function a(){var t,n;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c){a.next=7;break}return t={ingredientLines:e.recipe.recipe.ingredientLines,img:e.recipe.recipe.image,label:e.recipe.recipe.label},n=JSON.stringify(t),a.next=5,fetch("/user/save",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include",body:n});case 5:a.sent,o(!c);case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return r.a.createElement("div",{className:"grid-card"},r.a.createElement("img",{src:e.recipe.recipe.image,className:"card-img",alt:e.recipe.recipe.label}),r.a.createElement("span",{className:"recipe-title"},e.recipe.recipe.label),null!==e.isLoggedIn&&r.a.createElement("span",{className:!c&&"save-button",onClick:function(){return u.apply(this,arguments)}},!c&&"Save recipe",c&&r.a.createElement("span",{className:"save-button-inactive"},"Recipe saved!")),r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"show-details show-details-open ingredient-card-tag",onClick:s},"Show"),r.a.createElement("div",{className:"card-content-closed"},r.a.createElement("a",{href:e.recipe.recipe.url,target:"_blank",className:"full-instructions-link",style:{display:"none"}},"See full instructions"),r.a.createElement("ul",{style:{display:"none"}},e.recipe.recipe.ingredientLines.map((function(e){return r.a.createElement("li",null,e)}))))),r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"show-details show-details-open nutrition-card-tag",onClick:s},"Show"),r.a.createElement("div",{className:"card-content-closed"},r.a.createElement("ul",{style:{display:"none"}},e.recipe.recipe.digest.map((function(e){return r.a.createElement("li",null,r.a.createElement("b",null,e.label,":")," ",Math.floor(e.total)," ",e.unit)})))),r.a.createElement("div",{className:"recipe-summary-div"},e.recipe.recipe.ingredientLines.length," ingredients ",e.recipe.recipe.healthLabels.map((function(e){return"| ".concat(e," ")})))))},N=function(e){return e.recipes?r.a.createElement("div",{className:"card-container"},e.recipes.map((function(a){return r.a.createElement(O,{recipe:a,isLoggedIn:e.isLoggedIn,key:a.recipe.label+"_uri_"+a.recipe.uri})}))):!e.recipes&&e.searched?r.a.createElement("h3",{id:"no-results-message"},"Sorry! We couldn't find anything."):null},j=function(){var e=Object(n.useState)([]),a=Object(d.a)(e,2),t=a[0],c=a[1],o=Object(n.useState)(""),s=Object(d.a)(o,2),u=s[0],p=(s[1],Object(n.useState)(null)),h=Object(d.a)(p,2),g=h[0],b=h[1],f=Object(n.useState)(null),E=Object(d.a)(f,2),v=E[0],O=E[1],j=Object(n.useState)(!1),k=Object(d.a)(j,2),x=k[0],C=k[1];Object(n.useEffect)((function(){document.addEventListener("mousedown",(function(e){"login"!==g&&"signup"!==g||"login-dropdown"===e.target.id||"login-button"===e.target.id||"signup-button"===e.target.id||"login-dropdown"===e.target.id||e.target.dataset.dropdown||b(null)}))})),Object(n.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/verify",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include"});case 2:200===e.sent.status&&O(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[v]);var S=function(e){O(e)},L=function(e){"signup"===e&&b("signup"===g?null:"signup"),"login"===e&&b("login"===g?null:"login")},F=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/logout",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include"});case 2:200===e.sent.status&&window.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar"},!v&&r.a.createElement("div",{className:"navbar-button-container",id:"guest-navbar"},r.a.createElement("span",{className:"navbar-button",id:"login-button",onClick:function(){return L("login")}},"login"),r.a.createElement("span",{className:"navbar-button",id:"signup-button",onClick:function(){return L("signup")}},"sign up"),"login"===g&&r.a.createElement(y,{render:"login",isLoggedIn:S}),"signup"===g&&r.a.createElement(y,{render:"signup",isLoggedIn:S})),v&&r.a.createElement("div",{className:"navbar-button-container",id:"guest-navbar"},r.a.createElement("a",{href:"/dashboard",className:"navbar-button",id:"dashboard-button"},"dashboard"),r.a.createElement("span",{className:"navbar-button",id:"login-button",onClick:F},"logout"))),r.a.createElement("div",{className:"app-container"},r.a.createElement(w,{onClick:function(e,a){var t="https://api.edamam.com/search?q=".concat(e,"&app_id=").concat("75c55f11","&app_key=").concat("85c90ba0da33bd59f927417d3d72febe","&from=0&to=100");a.lowCarb&&(t+="&diet=low-carb"),a.lowFat&&(t+="&diet=low-fat"),a.balanced&&(t+="&diet=balanced"),a.highProtein&&(t+="&diet=high-protein"),a.highFiber&&(t+="&diet=high-fiber"),a.lowSodium&&(t+="&diet=low-sodium"),a.calFrom&&a.calTo&&a.calFrom<a.calTo&&(t+="&calories=".concat(a.calFrom,"-").concat(a.calTo)),fetch(t).then((function(e){return e.json()})).then((function(e){c(e.hits),C(!0)}))},setSearched:function(){C(!0)}}),u?r.a.createElement(m,{queries:null}):null,r.a.createElement(N,{recipes:t,searched:x,isLoggedIn:v})))};o.a.render(r.a.createElement(j,null),document.getElementById("root"))},4:function(e,a,t){},7:function(e,a,t){e.exports=t.p+"static/media/LOGO-small.0f2b0d27.svg"}},[[12,1,2]]]);
//# sourceMappingURL=main.27dd6a0f.chunk.js.map