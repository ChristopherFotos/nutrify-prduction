(this["webpackJsonpnutrify-full"]=this["webpackJsonpnutrify-full"]||[]).push([[0],{11:function(e,t,a){e.exports=a(19)},16:function(e,t,a){},18:function(e,t,a){e.exports=a.p+"static/media/LOGO-small.32e200b3.svg"},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),l=(a(16),a(4),a(2)),i=a.n(l),s=a(3),u=a(1);a(18);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var m=r.a.createElement("tspan",{x:"481.72px 503.392px 531.976px ",y:"263.758px 263.758px 263.758px "},"ify"),g=function(e){var t=e.svgRef,a=e.title,n=p(e,["svgRef","title"]);return r.a.createElement("svg",d({width:"20%",height:"20%",viewBox:"0 0 204 91",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:t},n),a?r.a.createElement("title",null,a):null,r.a.createElement("g",{transform:"matrix(1,0,0,1,-34.025,-30.2984)"},r.a.createElement("g",{transform:"matrix(0.815777,0,0,0.815777,-456.129,-138.599)"},r.a.createElement("circle",{cx:656.14,cy:262.392,r:55.298,style:{fill:"rgb(30,229,107)"}})),r.a.createElement("g",{transform:"matrix(0.599153,0,0,0.546049,-133.745,-70.1757)"},r.a.createElement("rect",{x:280.012,y:184.086,width:75.291,height:82.613,style:{fill:"rgb(30,229,107)"}})),r.a.createElement("g",{transform:"matrix(0.651718,0,0,0.651718,-151.056,-79.2598)"},r.a.createElement("text",{x:"312.016px",y:"263.758px",style:{fontFamily:"'Montserrat-Bold', 'Montserrat'",fontWeight:700,fontSize:72,fill:"white"}},"Nu"),r.a.createElement("text",{x:"419.656px",y:"263.758px",style:{fontFamily:"'Montserrat-Bold', 'Montserrat'",fontWeight:700,fontSize:72,fill:"rgb(30,229,107)"}},"tr",m)),r.a.createElement("g",{transform:"matrix(0.45019,0,0,0.454366,43.2584,-38.5243)"},r.a.createElement("path",{d:"M332.654,151.47L431.872,151.47L431.872,250.414C431.719,196.061 387.406,151.94 332.654,151.47Z",style:{fill:"rgb(30,229,107)"}}))))},h=r.a.forwardRef((function(e,t){return r.a.createElement(g,d({svgRef:t},e))})),f=(a.p,function(e){return e.query?r.a.createElement("p",{className:"search-summary-p"},"Showing results for ",r.a.createElement("b",null,e.query)):null}),b=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-options-label",onClick:e.onClick},"More search options"))},E=a(7),v=a(8),w=a(9),y=a(10),O=function(e){Object(y.a)(a,e);var t=Object(w.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={calFrom:null,calTo:null},n.calTo="null",n.options={red:!1,blue:!1},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"search-options-expand",className:"search-dropdown-closed"},r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"low carb"}),r.a.createElement("span",null,"Low carb")),r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"low fat"}),r.a.createElement("span",null,"Low fat")),r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"balanced"}),r.a.createElement("span",null,"Balanced")),r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"high protein"}),r.a.createElement("span",null,"High protein")),r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"high fiber"}),r.a.createElement("span",null,"High fiber")),r.a.createElement("label",{className:"search-option-heading-closed"},r.a.createElement("input",{type:"checkbox",onChange:this.props.updateOptions,name:"low sodium"}),r.a.createElement("span",null,"Low sodium")),r.a.createElement("p",null,r.a.createElement("span",{className:"search-option-heading-closed"},"nutrient options:"),r.a.createElement("input",{className:"validate",placeholder:"min calories",name:"cal-from",type:"number",onChange:function(t){e.props.updateOptions(t)},value:this.calFrom,id:"option-input-1"}),r.a.createElement("input",{placeholder:"max calories",name:"cal-to",type:"number",value:this.calTo,onChange:function(t){isNaN(t.target.value)||e.props.updateOptions(t)},className:"validate",id:"option-input-2"})))}}]),a}(r.a.Component),x=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({balanced:!1,lowCarb:!1,lowFat:!1,lowSodium:!1,highFiber:!1,highProtein:!1}),i=Object(u.a)(l,2),s=i[0],d=(i[1],Object(n.useState)()),p=Object(u.a)(d,2),m=p[0],g=p[1],E=Object(n.useState)(!1),v=Object(u.a)(E,2),w=v[0],y=v[1];return r.a.createElement("form",{className:"search-form"},r.a.createElement("div",{className:"search-flexbox-span flex-align-bottom"},r.a.createElement(h,null),r.a.createElement("span",{className:"subline"},"powered by edamam")),r.a.createElement("input",{type:"text",id:"search-bar",value:c,onChange:function(e){o(e.target.value)},onKeyPress:function(t){return function(t){"Enter"===t.key&&(e.onClick(c,s),g(c,s))}(t)},className:"search-bar",placeholder:"search by ingredient or recipe name"}),r.a.createElement("div",{className:"search-flexbox-span"},r.a.createElement("a",{className:"waves-effect waves-light btn search-button",onClick:function(t){t.preventDefault(),e.onClick(c,s),g(c,s)}},"search"),r.a.createElement(b,{onClick:w?function(){y(!w);var e=document.getElementById("search-options-expand");e.classList.remove("search-dropdown-open"),e.classList.add("search-dropdown-closed"),Array.from(e.children).forEach((function(e){e.classList.remove("search-option-heading-open"),e.classList.add("search-option-heading-closed")}))}:function(){y(!w);var e=document.getElementById("search-options-expand");e.classList.remove("search-dropdown-closed"),e.classList.add("search-dropdown-open"),Array.from(e.children).forEach((function(e){e.classList.remove("search-option-heading-closed"),e.classList.add("search-option-heading-open")}))}})),r.a.createElement(O,{updateOptions:function(e){"low carb"===e.target.name?s.lowCarb=!s.lowCarb:s.lowCarb=s.lowCarb,"low fat"===e.target.name?s.lowFat=!s.lowFat:s.lowFat=s.lowFat,"balanced"===e.target.name?s.balanced=!s.balanced:s.balanced=s.balanced,"high protein"===e.target.name?s.highProtein=!s.highProtein:s.highProtein=s.highProtein,"high fiber"===e.target.name?s.highFiber=!s.highFiber:s.highFiber=s.highFiber,"low sodium"===e.target.name?s.lowSodium=!s.lowSodium:s.lowSodium=s.lowSodium,"cal-from"!==e.target.name||isNaN(e.target.value)||(s.calFrom=e.target.value),"cal-to"!==e.target.name||isNaN(e.target.value)||(s.calTo=e.target.value)}}),r.a.createElement(f,{query:m}))},j=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),d=Object(u.a)(l,2),p=d[0],m=d[1],g=Object(n.useState)(""),h=Object(u.a)(g,2),f=h[0],b=h[1],E=Object(n.useState)(!1),v=Object(u.a)(E,2),w=v[0],y=v[1],O=Object(n.useState)(!1),x=Object(u.a)(O,2),j=x[0],N=x[1],k=Object(n.useState)(!1),S=Object(u.a)(k,2),C=S[0],L=S[1],F=Object(n.useState)(!1),P=Object(u.a)(F,2),T=(P[0],P[1]),I=Object(n.useState)(!1),M=Object(u.a)(I,2),W=M[0],B=M[1],R=function(){return"login"===e.render?"login":"signup"};function q(){return _.apply(this,arguments)}function _(){return(_=Object(s.a)(i.a.mark((function t(){var a,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=JSON.stringify({email:c,password:p,verifyPassword:f}),"signup"!==R()||p===f){t.next=4;break}return B(!0),t.abrupt("return");case 4:if(""!==c){t.next=7;break}return L(!0),t.abrupt("return");case 7:if(""!==p){t.next=10;break}return N(!0),t.abrupt("return");case 10:return"signup"===R()&&""===f&&T(!0),t.next=13,fetch("/user/".concat(R()),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include",body:a});case 13:if(401!==(n=t.sent).status){t.next=18;break}return y(!0),e.isLoggedIn(!1),t.abrupt("return");case 18:if(201!==n.status&&200!==n.status){t.next=28;break}if(e.isLoggedIn(!0),y(!1),"signup"!==R()||w){t.next=26;break}return t.next=24,fetch("/user/login",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include",body:a});case 24:409===(r=t.sent).status?y(!0):200===r.status&&(y(!1),window.location.reload(),e.isLoggedIn(!0));case 26:t.next=29;break;case 28:409===n.status&&y(!0);case 29:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var A=function(e){"Enter"===e.key&&q()};return r.a.createElement("div",{className:"login-dropdown",id:"login-dropdown","data-dropdown":"true"},r.a.createElement("h4",{"data-dropdown":"true"},"login"===e.render&&"login","signup"===e.render&&"signup"),r.a.createElement("form",{"data-dropdown":"true"},r.a.createElement("label",{for:"email","data-dropdown":"true"},"Email"),r.a.createElement("input",{type:"text",name:"email","data-dropdown":"true",className:"login-input",onChange:function(e){o(e.target.value)},onKeyPress:function(e){A(e)}}),r.a.createElement("label",{for:"password","data-dropdown":"true"},"Password"),r.a.createElement("input",{type:"password",name:"password","data-dropdown":"true",className:"login-input",onChange:function(e){m(e.target.value)},onKeyPress:function(e){A(e)}}),"signup"===e.render&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{for:"verify-password","data-dropdown":"true"},"Verify password"),r.a.createElement("input",{type:"password",name:"verify-password","data-dropdown":"true",className:"login-input",onChange:function(e){b(e.target.value)},onKeyPress:function(e){A(e)}})),r.a.createElement("span",{className:"login-button",onClick:q,"data-dropdown":"true"},"login"===e.render&&"login","signup"===e.render&&"sign up")),w&&"signup"===e.render&&r.a.createElement("p",null,"Whoops! That email is already being used."),w&&"login"===e.render&&r.a.createElement("p",null,"Whoops! Invalid email or password."),W&&r.a.createElement("p",null,"Whoops! Those passwords don't match."),C&&r.a.createElement("p",null,"Whoops! Please provide an email address"),j&&r.a.createElement("p",null,"Whoops! Please provide a password"))},N=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],o=a[1],l=function(e){e.target.expanded?e.target.expanded&&(e.target.expanded=!1,e.target.innerText="Show",Array.from(e.target.parentElement.children[1].children).forEach((function(e){e.style.display="none"})),e.target.parentElement.children[1].classList.remove("card-content-open"),e.target.parentElement.children[1].classList.add("card-content-closed"),e.target.parentElement.children[1].classList.remove("card-open"),e.target.parentElement.classList.remove("card-open"),e.target.parentElement.classList.add("card-closed")):(e.target.expanded=!0,e.target.innerText="Hide",Array.from(e.target.parentElement.children[1].children).forEach((function(e){e.style.display="block"})),e.target.parentElement.children[1].classList.remove("card-content-closed"),e.target.parentElement.children[1].classList.add("card-content-open"),e.target.parentElement.classList.remove("card-closed"),e.target.parentElement.classList.add("card-open"))};function d(){return(d=Object(s.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=7;break}return a={ingredientLines:e.recipe.recipe.ingredientLines,img:e.recipe.recipe.image,label:e.recipe.recipe.label,digest:e.recipe.recipe.digest,url:e.recipe.recipe.url,calories:Math.floor(e.recipe.recipe.calories)},n=JSON.stringify(a),t.next=5,fetch("/user/save",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include",body:n});case 5:t.sent,o(!c);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",{className:"grid-card"},r.a.createElement("img",{src:e.recipe.recipe.image,className:"card-img",alt:e.recipe.recipe.label}),r.a.createElement("span",{className:"recipe-title"},e.recipe.recipe.label),null!==e.isLoggedIn&&r.a.createElement("span",{className:!c&&"save-button",onClick:function(){return d.apply(this,arguments)}},!c&&"Save recipe",c&&r.a.createElement("span",{className:"save-button-inactive"},"Recipe saved!")),r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"show-details show-details-open ingredient-card-tag",onClick:l},"Show"),r.a.createElement("div",{className:"card-content-closed"},r.a.createElement("a",{href:e.recipe.recipe.url,target:"_blank",className:"full-instructions-link",style:{display:"none"}},"See full instructions"),r.a.createElement("ul",{style:{display:"none"}},e.recipe.recipe.ingredientLines.map((function(e){return r.a.createElement("li",null,e)}))))),r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"show-details show-details-open nutrition-card-tag",onClick:l},"Show"),r.a.createElement("div",{className:"card-content-closed"},r.a.createElement("ul",{style:{display:"none"}},e.recipe.recipe.digest.map((function(e){return r.a.createElement("li",null,r.a.createElement("b",null,e.label,":")," ",Math.floor(e.total)," ",e.unit)})))),r.a.createElement("div",{className:"recipe-summary-div"},e.recipe.recipe.ingredientLines.length," ingredients ",e.recipe.recipe.healthLabels.map((function(e){return"| ".concat(e," ")})))))},k=function(e){return e.recipes?r.a.createElement("div",{className:"card-container"},e.recipes.map((function(t){return r.a.createElement(N,{recipe:t,isLoggedIn:e.isLoggedIn,key:t.recipe.label+"_uri_"+t.recipe.uri})}))):!e.recipes&&e.searched?r.a.createElement("h3",{id:"no-results-message"},"Sorry! We couldn't find anything."):null},S=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(u.a)(o,2),d=l[0],p=(l[1],Object(n.useState)(null)),m=Object(u.a)(p,2),g=m[0],h=m[1],b=Object(n.useState)(null),E=Object(u.a)(b,2),v=E[0],w=E[1],y=Object(n.useState)(!1),O=Object(u.a)(y,2),N=O[0],S=O[1];Object(n.useEffect)((function(){document.addEventListener("mousedown",(function(e){"login"!==g&&"signup"!==g||"login-dropdown"===e.target.id||"login-button"===e.target.id||"signup-button"===e.target.id||"login-dropdown"===e.target.id||e.target.dataset.dropdown||h(null)}))})),Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/verify",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include"});case 2:200===e.sent.status&&w(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[v]);var C=function(e){w(e)},L=function(e){"signup"===e&&h("signup"===g?null:"signup"),"login"===e&&h("login"===g?null:"login")},F=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/logout",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include"});case 2:200===e.sent.status&&window.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar"},!v&&r.a.createElement("div",{className:"navbar-button-container",id:"guest-navbar"},r.a.createElement("span",{className:"navbar-button",id:"login-button",onClick:function(){return L("login")}},"login"),r.a.createElement("span",{className:"navbar-button",id:"signup-button",onClick:function(){return L("signup")}},"sign up"),"login"===g&&r.a.createElement(j,{render:"login",isLoggedIn:C}),"signup"===g&&r.a.createElement(j,{render:"signup",isLoggedIn:C})),v&&r.a.createElement("div",{className:"navbar-button-container",id:"guest-navbar"},r.a.createElement("a",{href:"/dashboard",className:"navbar-button",id:"dashboard-button"},"dashboard"),r.a.createElement("span",{className:"navbar-button",id:"login-button",onClick:F},"logout"))),r.a.createElement("div",{className:"app-container"},r.a.createElement(x,{onClick:function(e,t){var a="https://api.edamam.com/search?q=".concat(e,"&app_id=").concat("75c55f11","&app_key=").concat("85c90ba0da33bd59f927417d3d72febe","&from=0&to=100");t.lowCarb&&(a+="&diet=low-carb"),t.lowFat&&(a+="&diet=low-fat"),t.balanced&&(a+="&diet=balanced"),t.highProtein&&(a+="&diet=high-protein"),t.highFiber&&(a+="&diet=high-fiber"),t.lowSodium&&(a+="&diet=low-sodium"),t.calFrom&&t.calTo&&t.calFrom<t.calTo&&(a+="&calories=".concat(t.calFrom,"-").concat(t.calTo)),fetch(a).then((function(e){return e.json()})).then((function(e){c(e.hits),S(!0)}))},setSearched:function(){S(!0)}}),d?r.a.createElement(f,{queries:null}):null,r.a.createElement(k,{recipes:a,searched:N,isLoggedIn:v})))};o.a.render(r.a.createElement(S,null),document.getElementById("root"))},4:function(e,t,a){}},[[11,1,2]]]);
//# sourceMappingURL=main.1d99cff1.chunk.js.map